= render 'wizard_header'

= render_navigation :context => :real_estate

- if can_be_edited?(@real_estate) #the latter keeps the admin away
  .row
    .pull-right
      .padded
        .btn-group
          = link_to(new_cms_real_estate_image_path, :class => 'btn') do
            %i.icon-picture
            = t('.new_image')
          = link_to(new_cms_real_estate_floor_plan_path, :class => 'btn') do
            %i.icon-picture
            = t('.new_floor_plan')
          = link_to(new_cms_real_estate_video_path, :class => 'btn') do
            %i.icon-film
            = t('.new_video')
          = link_to(new_cms_real_estate_document_path, :class => 'btn') do
            %i.icon-file
            = t('.new_document')

- if @real_estate.images.any?
  = render 'form', :real_estate => @real_estate

- if @real_estate.floor_plans.any?
  %table.table.table-bordered.table-striped
    %thead
      %tr
        %th{ :width => '7%' }
        %th{ :width => '80%' } Grundrisse
        %th
        %th

    %tbody
      - @floor_plans.each do |floor_plan|
        %tr{:id => "floor-plan-#{floor_plan.id}"}
          %td
          %td= floor_plan.title
          %td
            - if can? :update, floor_plan
              = link_to  t('.destroy'), cms_real_estate_floor_plan_path(@real_estate, floor_plan), :method => :delete, :confirm => t('.confirm_delete', :title => floor_plan.title)
          %td
            - if can? :update, floor_plan
              = link_to  t('.edit'), edit_cms_real_estate_floor_plan_path(@real_estate, floor_plan)
            - else
              = link_to t('.show'), cms_real_estate_floor_plan_path(@real_estate, floor_plan)

- if @videos.any?
  %table.table.table-bordered.table-striped
    %thead
      %tr
        %th{ :width => '7%' }
        %th{ :width => '80%' } Videos
        %th
        %th

    %tbody
      - @videos.each do |video|
        %tr{:id => "video-#{video.id}"}
          %td
          %td= video.title
          %td
            - if can? :update, video
              = link_to  t('.destroy'), cms_real_estate_video_path(@real_estate, video), :method => :delete, :confirm => t('.confirm_delete', :title => video.title)
          %td
            - if can? :update, video
              = link_to  t('.edit'), edit_cms_real_estate_video_path(@real_estate, video)
            - else
              = link_to t('.show'), cms_real_estate_video_path(@real_estate, video)

- if @documents.any?
  %table.table.table-bordered.table-striped
    %thead
      %tr
        %th{ :width => '7%' }
        %th{ :width => '80%' } Dokumente
        %th
        %th

    %tbody
      - @documents.each do |document|
        %tr{:id => "document-#{document.id}"}
          %td
          %td= document.title
          %td
            - if can? :update, document
              = link_to  t('.destroy'), cms_real_estate_document_path(@real_estate, document), :method => :delete, :confirm => t('.confirm_delete', :title => document.title)
          %td
            - if can? :update, document
              = link_to  t('.edit'), edit_cms_real_estate_document_path(@real_estate, document)
            - else
              = link_to t('.show'), cms_real_estate_document_path(@real_estate, document)
